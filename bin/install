#!/usr/bin/env sh

set -e

echo "ðŸ”Ž checking for bazel \n"
has_bazel=`which bazel | sed -e 's/^[[:space:]]*//'`
if [ -z "$has_bazel" ]; then
  echo "ðŸ’¾ Installing Bazel \n"

  # Installing bazel
  #   - if this fails you may need to xcode-select --install
  brew install bazel && \
  bazel --version && \
  # Installing graphviz to view bazel build graph
  # See: https://graphviz.org/doc/info/command.html
  brew install graphviz && \
  # Installing ibazel for file watching and restarting
  brew tap bazelbuild/tap && \
  brew install bazelbuild/tap/ibazel
fi


echo "ðŸ”Ž checking for kubectl \n"
has_kubectl=`which kubectl | sed -e 's/^[[:space:]]*//'`
if [ -z "$has_kubectl" ]; then
  echo "ðŸ’¾ Installing kubectl \n"

  brew install kubectl
fi

echo "ðŸ”Ž checking for kubectx \n"
has_kubectx=`which kubectx | sed -e 's/^[[:space:]]*//'`
if [ -z "$has_kubectx" ]; then
  echo "ðŸ’¾ Installing kubectx \n"

  brew install kubectx
fi

echo "ðŸ”Ž checking for minikube \n"
has_minikube=`which minikube | sed -e 's/^[[:space:]]*//'`
if [ -z "$has_minikube" ]; then
  echo "ðŸ’¾ Installing minikube \n"

  brew install minikube
fi

echo "ðŸ”Ž checking for kompose \n"
has_kompose=`which kompose | sed -e 's/^[[:space:]]*//'`
if [ -z "$has_kompose" ]; then
  echo "ðŸ’¾ Installing kompose \n"

  brew install kompose
fi
